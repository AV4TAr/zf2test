<?phpnamespace Album\Controller;use Zend\Mvc\Controller\AbstractActionController;use Zend\View\Model\ViewModel;use Album\Model\AlbumTable;use Album\Model\Album;use Album\Form\AlbumForm;/** * AlbumController * * @author * * @version * */class AlbumController extends AbstractActionController{    protected $albumTable;        /**     *      * @return \Album\Model\AlbumTable     */    public function getAlbumTable()    {        if (!$this->albumTable) {            $sm = $this->getServiceLocator();            $this->albumTable = $sm->get('Album\Model\AlbumTable');        }        return $this->albumTable;    }        /**     * The default action - show the home page     */    public function indexAction ()    {        return new ViewModel(array(            'albums' => $this->getAlbumTable()->fetchAll(),        ));    }        public function addAction()    {        $Form = new AlbumForm();        $request = $this->getRequest();        if($request->isPost()){            $Album = new Album();            $Form->setInputFilter($Album->getInputFilter());            $Form->setData($request->getPost());            if($Form->isValid()){                $Album->exchangeArray($Form->getData());                $this->getAlbumTable()->saveAlbum($Album);                                return $this->redirect()->toRoute('album');            }        }        return new ViewModel(array(                'form' => $Form,        ));    }        public function editAction()    {        $id = (int) $this->params()->fromRoute('id', 0);        if (!$id) {            return $this->redirect()->toRoute('album', array(                    'action' => 'add'            ));        }        $Album = $this->getAlbumTable()->getAlbum($id);                $Form = new AlbumForm();        $Form->bind($Album);                $request = $this->getRequest();        if ($request->isPost()) {            $Form->setInputFilter($Album->getInputFilter());            $Form->setData($request->getPost());            if ($Form->isValid()) {                $this->getAlbumTable()->saveAlbum($Form->getData());                // Redirect to list of albums                return $this->redirect()->toRoute('album');            }        }                return new ViewModel(array(                'id'   => $id,                'form' => $Form,        ));    }        public function deleteAction()    {        $id = (int) $this->params()->fromRoute('id', 0);        if (!$id) {            return $this->redirect()->toRoute('album');        }        $request = $this->getRequest();        if ($request->isPost()) {            $del = $request->getPost('del', 'No');            if($del == 'Yes'){                $id = (int) $request->getPost('id');                $this->getAlbumTable()->deleteAlbum($id);            }            return $this->redirect()->toRoute('album');        }                return array(                'id'    => $id,                'album' => $this->getAlbumTable()->getAlbum($id)        );    }}